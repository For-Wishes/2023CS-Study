# π’΅ μΈν„°λ½νΈ(Interrupt)

# β… μΈν„°λ½νΈλ€?
CPUκ°€ ν”„λ΅κ·Έλ¨μ„ μ‹¤ν–‰ν•κ³  μμ„ λ•, μ…μ¶λ ¥ ν•λ“μ›¨μ–΄ λ“±μ μ¥μΉλ‚ μμ™Έ μƒν™©μ΄ λ°μƒν•μ—¬ μ²λ¦¬κ°€ ν•„μ”ν•  κ²½μ°μ— λ§μ΄ν¬λ΅ν”„λ΅μ„Έμ„μ—κ² μ•λ ¤ μ²λ¦¬ν•  μ μλ„λ΅ ν•λ” κ²ƒμ„ λ§ν•λ‹¤.  
μ°μ„ μ μΌλ΅ μ²λ¦¬ν•΄μ•Ό ν•  μΌμ΄ λ°μƒν•μ€μ„ λ• κ·Έκ²ƒμ„ μ²λ¦¬ν•κ³  μ›λ λ™μ‘μΌλ΅ λμ•„μ¨λ‹¤.  
μΈν„°λ½νΈλ” ν¬κ² ν•λ“μ›¨μ–΄ μΈν„°λ½νΈμ™€ μ†ν”„νΈμ›¨μ–΄ μΈν„°λ½νΈλ΅ λ‚λ‰λ‹¤.

<br/>

- μ»΄ν“¨ν„°κ°€ μ‘μ—…μ„ μν–‰ν•λ λ„μ¤‘ μκΈ°μΉ λ»ν• νΉμν• μƒν™©μ΄ λ°μƒν•μ—¬ μ‘μ—…μ„ μ¤‘λ‹¨ν•κ³ , νΉμν• μƒν™©μ„ λ¨Όμ € μ²λ¦¬ν• ν›„, μ›λμ μ‘μ—…μΌλ΅ λλμ•„κ°€ λ‚λ¨Έμ§€ μ‘μ—…μ„ κ³„μ† μν–‰ν•κ² λλ” μΌλ ¨μ κ³Όμ •μ΄λ‹¤.
- μΈν„°λ½νΈ λ‹Ήν• μ‹μ μ λ μ§€μ¤ν„°μ™€ PC(Program Counter : λ‹¤μ λ²μ— μ‹¤ν–‰ν•  λ…λ Ήμ–΄ μ£Όμ†)λ¥Ό PCB(Process Control Block)μ— μ €μ¥ν•΄λ‘κ³  CPUμ μ μ–΄λ¥Ό μΈν„°λ½νΈ μ„λΉ„μ¤ λ£¨ν‹΄(Interrupt Service Routine)μ— λ„κΈ΄λ‹¤.
- λ…λ Ήμ–΄μ μ‹¤ν–‰ λ‹¨κ³„λ¥Ό λ§μΉ  λ•λ§λ‹¤ CPUλ” λ°λ³µμ μΌλ΅ μΈν„°λ½νΈ μ”μ²­μ΄ μλ”μ§€ κ³„μ†ν•΄μ„ ν™•μΈν•λ‹¤.

<br/>

## μΈν„°λ½νΈ λ¶„λ¥
μ–΄λ–¤ μ‚¬λμ€ μ™Έλ¶€ μΈν„°λ½νΈ, λ‚΄λ¶€ μΈν„°λ½νΈλ΅ λ‚λ„κ³ , λ‹¤λ¥Έ μ‚¬λμ€ μ™Έλ¶€ μΈν„°λ½νΈ, λ‚΄λ¶€ μΈν„°λ½νΈ, μ†ν”„νΈμ›¨μ–΄ μΈν„°λ½νΈλ΅ λ‚λ„κ³ , μΈν„°λ½νΈλ‘ μμ™Έλ‘ νΌμ©ν•μ—¬ λ§ν•λ” μ‚¬λλ“¤λ„ μλ‹¤.  
μΈν„°λ½νΈκ°€ μ–΄λ””μ„ λ°μƒν•λλƒλ΅ κµ¬λ¶„ν•λ©΄, λΉ„λ™κΈ°μ  μΈν„°λ½νΈ(= ν•λ“μ›¨μ–΄ μΈν„°λ½νΈ), λ™κΈ°μ  μΈν„°λ½νΈ(= μ†ν”„νΈμ›¨μ–΄ μΈν„°λ½νΈ)λ΅ κµ¬λ¶„ν•  μ μλ‹¤.

<br/>

### ν•λ“μ›¨μ–΄ μΈν„°λ½νΈ
> Asynchronous Interrupt(λΉ„λ™κΈ°μ  μΈν„°λ½νΈ) = Interrupt = Hardware Interrupt
> 

<br/>

μΌλ°μ μΌλ΅ μΈν„°λ½νΈλ¥Ό μ΄λ¥΄λ” λ§μ΄λ‹¤.  
ν•λ“μ›¨μ–΄κ°€ λ°μƒμ‹ν‚¤λ” μΈν„°λ½νΈλ΅, CPUκ°€ μ•„λ‹ λ‹¤λ¥Έ ν•λ“μ›¨μ–΄ μ¥μΉκ°€ CPUμ— μ–΄λ–¤ μ‚¬μ‹¤μ„ μ•λ ¤ μ£Όκ±°λ‚ CPU μ„λΉ„μ¤λ¥Ό μ”μ²­ν•΄μ•Ό ν•  κ²½μ° λ°μƒμ‹ν‚¨λ‹¤.  
Maskable interrupt, Non-maskable interruptκ°€ μλ‹¤. (Interrunpt Maskκ°€ κ°€λ¥)  
- Maskable Interrupt
    - Interrupt Maskκ°€ κ°€λ¥
        - Interrupt Mask : μΈν„°λ½νΈκ°€ λ°μƒν•μ€μ„ λ• μ”κµ¬λ¥Ό λ°›μ•„λ“¤μΌμ§€ λ§μ§€ μ§€μ •ν•λ” κ²ƒ
    - μΈν…” CPUμ—μ„ **INTR pin**μΌλ΅ μ‹ νΈκ°€ λ“¤μ–΄μ¨λ‹¤.
    - CLI/STI instruction μ— μν•΄μ„ λ¬΄μ‹λ  μ μλ” interrupt μ΄λ‹¤.
    - μ…μ¶λ ¥ μ¥μΉκ°€ μ κΈ°ν•λ” μΈν„°λ½νΈ μ”μ²­κ³Ό κ±°μ λ€λ¶€λ¶„μ μΈν„°λ½νΈκ°€ μ—¬κΈ°μ— ν•΄λ‹Ήλλ‹¤.
- Non Maskable Interrupt(NMI)
    - Interrupt Maskκ°€ λ¶κ°€λ¥
    - κ±°λ¶€, λ¬΄μ‹ν•  μ μ—†μ = λ§¤μ° μ¤‘μ”ν• μΈν„°λ½νΈ
    - μ •μ „, ν•λ“μ›¨μ–΄ κ³ μ¥ λ“± μ–΄μ©” μ μ—†λ” μ¤λ¥
    - μΈν…” CPUμ—μ„ **NMI pin**μΌλ΅ μ‹ νΈκ°€ λ“¤μ–΄μ΄

<br/>

### μ†ν”„νΈμ›¨μ–΄ μΈν„°λ½νΈ
> Synchronous Interrupt(λ™κΈ°μ  μΈν„°λ½νΈ) = Exception = Software Interrupt
> 

<br/>

μ†ν”„νΈμ›¨μ–΄κ°€ λ°μƒμ‹ν‚¤λ” μΈν„°λ½νΈμ΄λ‹¤. μ†ν”„νΈμ›¨μ–΄(μ‚¬μ©μ ν”„λ΅κ·Έλ¨)κ°€ μ¤μ¤λ΅ μΈν„°λ½νΈ λΌμΈμ„ μ„Έν…ν•λ‹¤.
μΆ…λ¥ : μμ™Έ μƒν™©, System Call

<br/>

μΈν„°λ½νΈλ¥Ό λ°μƒμ‹ν‚¤κΈ° μ„ν•΄ ν•λ“μ›¨μ–΄/μ†ν”„νΈμ›¨μ–΄λ” CPUλ‚΄μ— μλ” `μΈν„°λ½νΈ λΌμΈ`μ„ μ„Έν…ν•μ—¬ μΈν„°λ½νΈλ¥Ό λ°μƒμ‹ν‚¨λ‹¤.
CPUλ” λ§¤λ² λ…λ Ήμ„ μν–‰ν•κΈ° μ „μ— μΈν„°λ½νΈ λΌμΈμ΄ μ„Έν…λμ–΄ μλ”μ§€λ¥Ό κ²€μ‚¬ν•λ‹¤.

<br/>

νΈλ©(Trap)μ΄λΌκ³ λ„ ν•λ©° ν”„λ΅κ·Έλ¨ λ‚΄λ¶€μ—μ„ μΌμ–΄λ‚λ” μΈν„°λ½νΈμ΄λ‹¤. μμ™Έμ™€ μ‹μ¤ν… μ½μ΄ μλ‹¤.

<br/>

> **Trap**  
> 
> νΈλ©(trap)μ€ μ‹¤ν–‰ μ¤‘μΈ ν”„λ΅κ·Έλ¨ λ‚΄μ— ν…μ¤νΈλ¥Ό μ„ν•΄ νΉλ³„ν• μ΅°κ±΄μ„ κ±Έμ–΄ λ†“μ€ κ²ƒμ„ λ§ν•λ‹¤.  
> Interrupt μ΄λ“ , System call μ΄λ“ , Exception μ΄λ“  λ°μƒμ΄ λλ©΄ Trapμ— μν•΄ catchκ°€ λκ³ ,  
> Trap handlerκ°€ κ° μƒν™©μ— λ§κ² μ²λ¦¬ν•λ„λ΅ μ•λ§κ² λ§¤ν•‘ν•΄ μ£Όμ–΄μ„ κ° μ„λΉ„μ¤ λ£¨ν‹΄ λλ” ν•Έλ“¤λ¬μ—μ„ μ²λ¦¬λ¥Ό μ‹ν‚¨λ‹¤.  
> 
> νΈλ©μ€ λ°μƒν•λ” μ‹μ μ΄ ν”„λ΅κ·Έλ¨μ μΌμ •ν• μ§€μ μ΄λ‹¤.  
> ν•λ“μ›¨μ–΄μ— μν•΄ μλ™μ μΌλ΅ λ―Έλ¦¬ μ•λ ¤μ§„ μ„μΉμ— μ΅°κ±΄μ μΌλ΅ μ ν”„ν•λ” κ²ƒ.  
> 
> Interrupt β†’ Interrupt Service Routines(ISR) μ„ μ‹¤ν–‰ν•λ„λ΅ μ²λ¦¬  
> System Call β†’ System Services μ„ μ‹¤ν–‰ν•λ„λ΅ μ²λ¦¬  
> Exception β†’ Exception Handler μ„ μ‹¤ν–‰ν•λ„λ΅ μ²λ¦¬
> 

<br/>

## μΈν„°λ½νΈ μΆ…λ¥
### ν•λ“μ›¨μ–΄ μΈν„°λ½νΈ(= μ™Έλ¶€ μΈν„°λ½νΈ(External Interrupt)) μΆ…λ¥
- μ…μ¶λ ¥ μΈν„°λ½νΈ (I/O interrupt) : μ…μ¶λ ¥ μ‘μ—…μ μΆ…λ£λ‚ μ…μ¶λ ¥ μ¤λ¥μ— μν•΄ CPUμ κΈ°λ¥μ΄ μ”μ²­λ¨
- μ •μ „, μ „μ› μ΄μƒ μΈν„°λ½νΈ(Power fail interrupt) : μ „μ› κ³µκΈ‰μ μ΄μƒ
- κΈ°κ³„ μ°©μ¤ μΈν„°λ½νΈ(Machine check interrupt) : CPUμ κΈ°λ¥μ μΈ μ¤λ¥
- μ™Έλ¶€ μ‹ νΈ μΈν„°λ½νΈ(External interrupt) : I/O μ¥μΉκ°€ μ•„λ‹ μ¤νΌλ μ΄ν„°λ‚ νƒ€μ΄λ¨Έμ— μν•΄ μλ„μ μΌλ΅ ν”„λ΅κ·Έλ¨μ΄ μ¤‘λ‹¨λ κ²½μ°

<br/>

### μ†ν”„νΈμ›¨μ–΄ μΈν„°λ½νΈ(= λ‚΄λ¶€ μΈν„°λ½νΈ(Internal Interrupt)) μΆ…λ¥
- ν”„λ΅κ·Έλ¨ κ²€μ‚¬ μΈν„°λ½νΈ(Program Check Interrupt)
    - 0μΌλ΅ λ‚λ„λ” κ²½μ°
    - OverFlow/UnderFlow
    - νμ΄μ§€ λ¶€μ¬
    - λ¶€λ‹Ήν• κΈ°μ–µ μ¥μ†μ μ°Έμ΅°
    
    > μμ™Έ μƒν™©μ— λ”°λΌ μΈν„°λ½νΈλ¥Ό ν¬κ² μ™Έλ¶€ μΈν„°λ½νΈ, λ‚΄λ¶€ μΈν„°λ½νΈ, μ†ν”„νΈμ›¨μ–΄ μΈν„°λ½νΈλ΅ λ‚λ μ μλ‹¤. μ΄λ΄ κ²½μ°, ν”„λ΅κ·Έλ¨ κ²€μ‚¬ μΈν„°λ½νΈλ” λ‚΄λ¶€ μΈν„°λ½νΈμ— μ†ν•λ‹¤. λ‚΄λ¶€ μΈν„°λ½νΈλ” Exception Interrupt νΉμ€ Trapμ΄λΌκ³  λ¶€λ¥Έλ‹¤.  
    > 
    > Exception : μμ™Έ μƒν™©μ— λ€ν• μλ―Έλ΅, μ†ν”„νΈμ›¨μ–΄ λ‚΄λ¶€μ—μ„ μμ™Έ μƒν™©μ„ μ²λ¦¬ν•λ” κ²ƒμ„ λ‘κ³  μ†ν”„νΈμ›¨μ–΄ μΈν„°λ½νΈλ¥Ό ExceptionμΌλ΅ λ³΄λ” κ²½μ°λ„ μλ‹¤.  
    > Trap : νΉλ³„ν• μ΅°κ±΄μ„ κ±Έμ–΄ λ‘κ³  μ΅°κ±΄μ— λ¶€ν•©ν•λ” κ²½μ°, μƒν™©μ— λ§λ” Service Routineμ΄λ‚ Handlerκ°€ μ‹¤ν–‰λλ„λ΅ ν•λ” κ²ƒμ„ μλ―Έν•λ‹¤. λ”°λΌμ„ μ΄ κ²½μ°μ—λ” ISR(Interrupt Service Routines) νΉμ€ μΈν„°λ½νΈ ν•Έλ“¤λ¬(Interrupt Handler)κ°€ λκ² λ‹¤.  
    > 
    > Exceptionκ³Ό Trapμ€ ν”„λ΅κ·Έλλ° μ „λ°μ μΌλ΅λ„ μ‚¬μ©λλ” μ©μ–΄μ΄λ‹ λ‹¨μ–΄λ¥Ό μ–΄λ–»κ² ν•΄μ„ν•λλƒμ μ°¨μ΄λ‹¤. λ„λ¬΄ λ‹¨μ–΄μ— λ§¤λ°λμ§€ μ•κ³  κ°λ…μ„ μ μµνλ” κ²ƒμ΄ μ¤‘μ”ν•λ‹¤.
    > 
- SVC(SuperVisor Call : κ°μ‹ ν”„λ΅κ·Έλ¨ νΈμ¶) μΈν„°λ½νΈ
    - μ‚¬μ©μκ°€ ν”„λ΅κ·Έλ¨μ„ μ‹¤ν–‰μ‹ν‚¤κ±°λ‚ Supervisiorμ„ νΈμ¶ν•λ” λ™μ‘μ„ μν–‰ν•λ” κ²½μ°
    - ν”„λ΅κ·Έλλ¨Έμ— μν•΄ μ½”λ“λ΅ μ§μΈ κ°μ‹ ν”„λ΅κ·Έλ¨μ„ νΈμ¶ν•λ” λ°©μ‹
    - μ΄μμ²΄μ κ°€ μ κ³µν•λ” μ„λΉ„μ¤μ— λ€ν• ν”„λ΅κ·Έλλ° μΈν„°νμ΄μ¤κ°€ System Callμ΄κ³ , System Callμ„ μ‹¤ν–‰μ‹ν‚¤κΈ° μ„ν• CPU λ…λ Ήμ–΄κ°€ SVCμ΄λ‹¤.

<br/>

## μΈν„°λ½νΈ μ°μ„  μμ„
μ—¬λ¬ μ¥μΉμ—μ„ μΈν„°λ½νΈκ°€ λ™μ‹μ— λ°μƒν•κ±°λ‚ μΈν„°λ½νΈ μ„λΉ„μ¤ λ£¨ν‹΄ μν–‰ μ¤‘ μΈν„°λ½νΈκ°€ λ°μƒν–μ„ κ²½μ° μ°μ„  μμ„λ¥Ό λ”°μ Έμ„ μ²λ¦¬ν•λ‹¤.  
μ „μ› μ΄μƒ(Power Fail) > κΈ°κ³„ μ°©μ¤(Machine Check) > μ™Έλ¶€ μ‹ νΈ(External) > μ…μ¶λ ¥(I/O) > λ…λ Ήμ–΄ μλ» > ν”„λ΅κ·Έλ¨ κ²€μ‚¬(Program Check) > SVC(SuperVisor Call)  
μΌλ°μ μΌλ΅ ν•λ“μ›¨μ–΄ μΈν„°λ½νΈκ°€ μ†ν”„νΈμ›¨μ–΄ μΈν„°λ½νΈλ³΄λ‹¤ μ°μ„  μμ„κ°€ λ†’κ³ , λ‚΄λ¶€ μΈν„°λ½νΈλ³΄λ‹¤ μ™Έλ¶€ μΈν„°λ½νΈκ°€ μ°μ„  μμ„κ°€ λ†’λ‹¤.

<br/>

![https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https://blog.kakaocdn.net/dn/bXN8JO/btrcrNOCdrX/p9yBaxaFeCQKL7VleUPKWk/img.png](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https://blog.kakaocdn.net/dn/bXN8JO/btrcrNOCdrX/p9yBaxaFeCQKL7VleUPKWk/img.png)

<br/>

## μΈν„°λ½νΈ μ°μ„  μμ„ νλ³„ λ°©λ²•
### μ†ν”„νΈμ›¨μ–΄μ μΈ λ°©λ²•(Polling)
μΈν„°λ½νΈ μ”μ²­ ν”λκ·Έλ¥Ό μ°¨λ΅€λ΅ λΉ„κµν•μ—¬ μ°μ„  μμ„κ°€ κ°€μ¥ λ†’μ€ μΈν„°λ½νΈ μμ›μ„ μ°Ύκ³ , μ΄μ— ν•΄λ‹Ήν•λ” μΈν„°λ½νΈ μ„λΉ„μ¤ λ£¨ν‹΄μ„ μν–‰ν•λ‹¤.  
μ†λ„κ°€ λ”°λ¥Έ μ¥μΉμ— λ†’μ€ λ“±κΈ‰μ„ λ¶€μ—¬ν•λ‹¤.  
μ°μ„  μμ„ λ³€κ²½μ΄ μ‰½λ‹¤.  
λ§μ€ μΈν„°λ½νΈκ°€ μμ„ κ²½μ° ν•λ“μ›¨μ–΄ μ μΈ λ°©λ²•μ— λΉ„ν•΄μ„ μ°μ„  μμ„ νλ‹¨ μ†λ„κ°€ λλ¦¬λ‹¤.  
νλ΅κ°€ κ°„λ‹¨ν•κ³  μµν†µμ„±μ΄ μμΌλ©°, λ³„λ„μ ν•λ“μ›¨μ–΄κ°€ ν•„μ” μ—†λ‹¤.

<br/>

### ν•λ“μ›¨μ–΄μ μΈ λ°©λ²•(Vectored Interrupt)
μΈν„°λ½νΈλ¥Ό μ”μ²­ν•  μ μλ” μ¥μΉμ™€ CPUμ‚¬μ΄μ— μ¥μΉ λ²νΈλ¥Ό μ‹λ³„ν•  μ μλ” λ²„μ¤λ¥Ό μ§λ ¬/λ³‘λ ¬λ΅ μ—°κ²°ν•λ‹¤.  
μΈν„°λ½νΈ λ²΅ν„°λ” μΈν„°λ½νΈλ¥Ό λ°μƒν• μ¥μΉκ°€ λ¶„κΈ°ν•  κ³³μ— λ€ν• μ •λ³΄μ΄λ‹¤.  
μ†ν”„νΈμ›¨μ–΄μ μΈ λ°©λ²•μ— λΉ„ν•΄ λΉ„κ²½μ μ μ΄λ‹¤.  
νλ΅κ°€ λ³µμ΅ν•κ³  μµν†µμ„±μ΄ μ—†μΌλ‚, λ³„λ„μ μ†ν”„νΈμ›¨μ–΄κ°€ ν•„μ” μ—†μ΄ ν•λ“μ›¨μ–΄λ΅ μ²λ¦¬λλ―€λ΅ μ†λ„κ°€ λΉ λ¥΄λ‹¤.  
ν•λ“μ›¨μ–΄μ μΈ λ°©λ²•μ€ μ•„λ 2 κ°€μ§€λ΅ λ‚λ‰λ‹¤.

<br/>

- Daisy Chain β…
    - μΈν„°λ½νΈκ°€ λ°μƒν•λ” λ¨λ“  μ¥μΉλ¥Ό ν•λ‚μ μ§λ ¬ νμ„ μΌλ΅ μ—°κ²°ν•λ‹¤.
    - μ°μ„  μμ„κ°€ λ†’μ€ μ¥μΉλ¥Ό μƒμ„μ— λ‘κ³  μ°μ„  μμ„ μ°¨λ΅€λ€λ΅ λ°°μΉν•λ‹¤.
- λ³‘λ ¬(Parallel) μ°μ„  μμ„ λ¶€μ—¬ λ°©μ‹
    - μΈν„°λ½νΈκ°€ λ°μƒν•λ” λ¨λ“  μ¥μΉλ¥Ό ν•λ‚μ μ§λ ¬ νμ„ μΌλ΅ μ—°κ²°ν•λ‹¤.
    - κ° μ¥μΉλ³„ μ°μ„  μμ„λ¥Ό νλ³„ν•κΈ° μ„ν• Mask registerμ— bitλ¥Ό μ„¤μ •ν•λ‹¤.
    - Mask registerμƒ μ°μ„  μμ„κ°€ λ†’μ€ μ„λΉ„μ¤ λ£¨ν‹΄ μν–‰ μ¤‘ μ°μ„  μμ„κ°€ λ‚®μ€ bitλ“¤μ„ λΉ„ν™μ„±ν™” μ‹ν‚¬ μ μλ‹¤.
    - λ°λ€λ΅ μ°μ„  μμ„κ°€ λ†’μ€ μΈν„°λ½νΈλ” λ‚®μ€ μΈν„°λ½νΈ μν–‰ μ¤‘μ—λ„ μ°μ„  μ²λ¦¬λλ‹¤.

<br/>

μΈν„°λ½νΈ μ„λΉ„μ¤ λ£¨ν‹΄μ„ μ‹¤ν–‰ν•  λ• μΈν„°λ½νΈ ν”λκ·Έ(IF)λ¥Ό 1λ΅ ν•λ©΄ μΈν„°λ½νΈ λ°μƒμ„ λ°©μ§€ν•  μ μλ‹¤.

<br/>
<br/>

# β… μΈν„°λ½νΈ μ²λ¦¬ κ³Όμ •
![https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https://blog.kakaocdn.net/dn/bpgPHt/btq5NcPlGTH/BRIMZzBQQMUDm6ojSqgK00/img.png](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https://blog.kakaocdn.net/dn/bpgPHt/btq5NcPlGTH/BRIMZzBQQMUDm6ojSqgK00/img.png)

<br/>

![https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https://blog.kakaocdn.net/dn/9h8PF/btq5L4qJsN9/J1dii0rfe0jqtRen1IaNS0/img.png](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https://blog.kakaocdn.net/dn/9h8PF/btq5L4qJsN9/J1dii0rfe0jqtRen1IaNS0/img.png)

<br/>

μΈν„°λ½νΈ μ›μ²μΈ ν•λ“μ›¨μ–΄μ—μ„ λλ” μμ™Έ μƒν™©μ΄ λ°μƒν•κ±°λ‚ μ†ν”„νΈμ›¨μ–΄ μΈν„°λ½νΈκ°€ κ±Έλ¦¬λ©΄ (λ…λ Ήμ–΄ μ‹¤ν–‰ λ‹¨κ³„λ¥Ό λ§μΉ  λ•λ§λ‹¤ μ¤‘μ•™ μ²λ¦¬ μ¥μΉλ” λ°λ³µμ μΌλ΅ μΈν„°λ½νΈ μ”μ²­μ΄ μλ”μ§€ ν™•μΈν•λ‹¤.) :
- ν„μ¬ μ§„ν–‰ μ¤‘μΈ κΈ°κ³„μ–΄ μ½”λ“λ¥Ό μ™„λ£ν•λ‹¤. (λ…λ Ήμ–΄ μ‚¬μ΄ν΄μΈ μΈμ¶κ³Ό μ‹¤ν–‰ λ‹¨κ³„λ¥Ό μΌλ‹¨ λ§μΉλ‹¤.)
- CPUμ νΉμλ μ§€μ¤ν„° μ¤‘, ν•μ΄λ΅ μΈν„°λ½νΈ λ§μ¤ν¬ λΉ„νΈλ¥Ό λ³΄κ³  λ§μ¤ν¬ λλ©΄ μΈν„°λ½νΈ λ¬΄μ‹ ν•λ‹¤.
- μΈν„°λ½νΈ λ²΅ν„°λ¥Ό μ½κ³ 
- ISR(μΈν„°λ½νΈ μ„λΉ„μ¤ λ£¨ν‹΄, μΈν„°λ½νΈ ν•Έλ“¤λ¬) μ£Όμ† κ°’μ„ μ–»λ”λ‹¤.
- ISRλ΅ μ ν”„ ν•λ‹¤. μ΄λ• PC(Program Counter, IP) κ°’μ€ μλ™ λ€ν”Ό μ €μ¥λλ‹¤.
- ν„μ¬ μ§„ν–‰ μ¤‘μΈ ν”„λ΅κ·Έλ¨μ λ μ§€μ¤ν„°λ¥Ό λ€ν”Όν•λ‹¤.
- ν•΄λ‹Ή μ½”λ“λ¥Ό μ‹¤ν–‰ν•λ‹¤.
- ν•΄λ‹Ή μΌμ„ λ‹¤ μ²λ¦¬ν•λ©΄, λ€ν”Όμ‹ν‚¨ λ μ§€μ¤ν„°λ¥Ό λ³µμ›ν•λ‹¤.
- ISRμ λμ— IRET λ…λ Ήμ–΄μ— μν•΄ μΈν„°λ½νΈκ°€ ν•΄μ  λλ‹¤.
- IRET λ…λ Ήμ–΄κ°€ μ‹¤ν–‰λλ©΄, λ€ν”Όμ‹ν‚¨ PC κ°’μ„ λ³µμ›ν•μ—¬ μ΄μ „ μ‹¤ν–‰ μ„μΉλ΅ λ³µμ›ν•λ‹¤.

<br/>

λ³΄ν†µ ISRλ΅ λ“¤μ–΄κ°€λ©΄μ„ CPUμ½”μ–΄μ μΈν„°λ½νΈ λ§μ¤ν¬ λΉ„νΈλ¥Ό μλ™ μ„¤μ •ν•κ³  μ‹μ‘λκΈ° λ•λ¬Έμ— λ‹¤λ¥Έ μΈν„°λ½νΈ μ²λ¦¬λ” λ€κΈ° μƒνƒλ΅ λλ” κ²½μ°κ°€ μΌλ°μ μ΄λ‹¤. λ”°λΌμ„ ISR λ‚΄μ—μ„ λ‹¤λ¥Έ μΈν„°λ½νΈλ¥Ό μ²λ¦¬ν•κ³  μ‹¶μ„ κ²½μ° μ΄ λ§μ¤ν¬ λΉ„νΈλ¥Ό ν•΄μ  ν•΄μ•Ό ν•λ‹¤.

<br/>
<br/>

# β… μΈν„°λ½νΈμ™€ νΉκ¶ λ…λ Ή
## λ…λ Ήμ–΄μ μΆ…λ¥
CPUκ°€ μν–‰ν•λ” λ…λ Ήμ—λ” `μΌλ° λ…λ Ή`κ³Ό `νΉκ¶ λ…λ Ή`μ΄ μλ‹¤.  
**μΌλ° λ…λ Ή**μ€ λ©”λ¨λ¦¬μ—μ„ μλ£λ¥Ό μ½μ–΄μ¤κ³ , CPUμ—μ„ κ³„μ‚°μ„ ν•λ” λ“±μ λ…λ Ήμ΄κ³  λ¨λ“  ν”„λ΅κ·Έλ¨μ΄ μν–‰ν•  μ μλ” λ…λ Ήμ΄λ‹¤.  
**νΉκ¶ λ…λ Ή**μ€ λ³΄μ•μ΄ ν•„μ”ν• λ…λ ΉμΌλ΅ μ…μ¶λ ¥ μ¥μΉ, νƒ€μ΄λ¨Έ λ“±μ μ¥μΉλ¥Ό μ ‘κ·Όν•λ” λ…λ Ήμ΄λ‹¤. νΉκ¶ λ…λ Ήμ€ ν•­μƒ μ΄μμ²΄μ λ§μ΄ μν–‰ν•  μ μλ‹¤.

<br/>

## Kernel Mode vs User Mode
μ΄μμ²΄μ λ” ν•λ“μ›¨μ–΄μ μΈ λ³΄μ•μ„ μ μ§€ν•κΈ° μ„ν•΄ κΈ°λ³Έμ μΌλ΅ λ‘κ°€μ§€ operationμ„ μ§€μ›ν•λ‹¤.  
**Kernel Mode**λ” μ΄μμ²΄μ κ°€ CPUμ μ μ–΄κ¶μ„ κ°€μ§€κ³  λ…λ Ήμ„ μν–‰ν•λ” λ¨λ“λ΅ `μΌλ° λ…λ Ή`κ³Ό `νΉκ¶ λ…λ Ή`  λ¨λ‘ μν–‰ν•  μ μλ‹¤.  
ν•μ§€λ§ **User Mode**λ” μΌλ° μ‚¬μ©μ ν”„λ΅κ·Έλ¨μ΄ CPUμ μ–΄κ¶μ„ κ°€μ§€κ³  λ…λ Ήμ„ μν–‰ν•λ” λ¨λ“μ΄κΈ° λ•λ¬Έμ— `μΌλ° λ…λ Ή`λ§μ„ μν–‰ν•  μ μλ‹¤.

<br/>
<br/>

# β… μΈν„°λ½νΈ κ΄€λ ¨ μ©μ–΄
## μΈν„°λ½νΈ λ²΅ν„°(Interrupt Vector)
μ—¬λ¬ κ°€μ§€ μΈν„°λ½νΈμ— λ€ν•΄ ν•΄λ‹Ή μΈν„°λ½νΈ λ°μƒ μ‹ μ²λ¦¬ν•΄μ•Ό ν•  λ£¨ν‹΄(ISR)μ μ£Όμ†λ¥Ό λ³΄κ΄€ν•κ³  μλ” κ³µκ°„μ΄λ‹¤.  
λ€λ¶€λ¶„μ CPUλ“¤μ€ μΈν„°λ½νΈ λ²΅ν„° ν…μ΄λΈ”μ„ κ°€μ§€κ³  μλ‹¤.  
μΈν…” x86μ—μ„λ” μ΄λ¥Ό IDT(Interrupt Descriptor Table)λΌκ³  ν•λ‹¤.

<br/>

## μΈν„°λ½νΈ μ„λΉ„μ¤ λ£¨ν‹΄(Interrupt Service Routine(ISR))
μΈν„°λ½νΈ ν•Έλ“¤λ¬ Interrupt HandlerλΌκ³ λ„ ν•λ‹¤.  
μΈν„°λ½νΈκ°€ μ ‘μλλ©΄ κ°κ°μ μΈν„°λ½νΈμ— λ€μ‘ν•μ—¬ νΉμ • κΈ°λ¥μ„ μ²λ¦¬ν•λ” κΈ°κ³„μ–΄ μ½”λ“ λ£¨ν‹΄(μ»¤λ„μ΄ μ‹¤ν–‰)  
ex : ν‚¤λ³΄λ“ μνμ„ λλ¬ ν‚¤λ³΄λ“ μΈν„°λ½νΈκ°€ λ°μƒν•λ©΄ μ΄μ— ν•΄λ‹Ήν•λ” μΈν„°λ½νΈ μ„λΉ„μ¤ λ£¨ν‹΄μ΄ μ‹¤ν–‰λ¨

<br/>

## μΈν„°λ½νΈ ν•Έλ“¤λ¬(Interrupt Handler)
μ‹¤μ  μΈν„°λ½νΈλ¥Ό μ²λ¦¬ν•κΈ° μ„ν• λ£¨ν‹΄μΌλ΅ μΈν„°λ½νΈ μ„λΉ„μ¤ λ£¨ν‹΄μ΄λΌκ³ λ„ ν•λ‹¤.  
μ΄μμ²΄μ μ μ½”λ“ μμ—­μ—λ” μΈν„°λ½νΈλ³„λ΅ μ²λ¦¬ν•΄μ•Ό ν•  λ‚΄μ©μ΄ μ΄λ―Έ ν”„λ΅κ·Έλ¨λμ–΄ μλ‹¤.  

<br/>

## PCB(Process Control Block)
μ»¤λ„μ λ°μ΄ν„° μμ—­μ— μ΅΄μ¬ν•λ©° κ°κ°μ ν”„λ΅μ„Έμ¤λ§λ‹¤ κ³ μ μ PCBκ°€ μλ‹¤.  
μΈν„°λ½νΈ λ°μƒ μ‹ ν”„λ΅μ„Έμ¤μ μ–΄λ λ¶€λ¶„μ΄ μν–‰ μ¤‘μ΄μ—λ”μ§€λ¥Ό μ €μ¥ν•λ‹¤. (μν–‰ μ¤‘μ΄λ Memory μ£Όμ†, λ μ§€μ¤ν„° κ°’, ν•λ“μ›¨μ–΄ μƒνƒ, ...)

<br/>
<br/>

# π—£ λ©΄μ ‘ μμƒ μ§λ¬Έ
## Q1. μΈν„°λ½νΈκ°€ λ¬΄μ—‡μ΄λ©°, μ‹¤ν–‰ νλ¦„μ€ μ–΄λ–»κ² λλ‚μ”?
- CPU ν•λ“μ›¨μ–΄λ” μΈν„°λ½νΈ μ”μ²­ λΌμΈ(Interrupt Request Line)μ΄λΌλ” ν• μ„ μ„ κ°–λ”λ°, CPUλ” κ° λ…λ Ήμ–΄λ¥Ό λλ‚΄κ³  λ‹¤μ λ…λ Ήμ–΄λ¥Ό μν–‰ν•κΈ° μ „μ— ν•­μƒ μ΄ μ„ μ„ κ²€μ‚¬ν•λ‹¤.
- μΈν„°λ½νΈλ” μ…μ¶λ ¥ μ»¨νΈλ΅¤λ¬κ°€ μΈν„°λ½νΈ μ”μ²­ λΌμΈμ— μ‹ νΈλ¥Ό λ³΄λ‚΄λ©΄ CPUκ°€ μ•μ•„μ°¨λ¦¬κ³  κ°μΆ… λ μ§€μ¤ν„° κ°’κ³Ό μƒνƒ μ •λ³΄λ¥Ό μ €μ¥ν• λ‹¤μ, μΈν„°λ½νΈ ν•Έλ“¤λ¬ ν•¨μλ΅ λ¶„κΈ°ν•λ” ν–‰μ„λ¥Ό λ§ν•λ‹¤.
- CPUκ°€ μΈν„°λ½νΈ λλ©΄, ν•λ μ—°μ‚°κΉμ§€λ” λ§μΉκ³  μ¤‘λ‹¨ν• μ±„ μΈν„°λ½νΈ ν•Έλ“¤λ¬ λ£¨ν‹΄μ„ μ‹¤ν–‰ν•λ‹¤. μΈν„°λ½νΈ ν•Έλ“¤λ¬μ μ‹¤ν–‰μ΄ μ™„λ£λλ©΄, CPUλ” μΈν„°λ½νΈ λμ—λ μ—°μ‚°μ„ μ¬κ°ν•λ‹¤. ν”„λ΅κ·Έλ¨ μΉ΄μ΄ν„°λ” λ‹¤μ λ…λ Ήμ–΄μ μ£Όμ†κ°€ λ“¤μ–΄κ°€ μλ‹¤.

<br/>

## Q2. μ»¨νΈλ΅¤λ¬κ°€ μ…λ ¥μ„ μ–»λ” λ°©λ²•μ— λ€ν•΄ μ„¤λ…ν•΄ μ£Όμ„Έμ”.
μ»¨νΈλ΅¤λ¬κ°€ μ…λ ¥μ„ λ°›λ” λ°©λ²•μ€ λ‘ κ°€μ§€κ°€ μλ‹¤.  
μ²« λ²μ§Έ λ°©λ²•μΌλ΅λ” ν΄λ§ λ°©μ‹μ΄ μλ‹¤. ν΄λ§ λ°©μ‹μ€ μ‚¬μ©μκ°€ λ…λ Ήμ–΄λ¥Ό μ…λ ¥ν•μ—¬ μ…λ ¥ ν•€μ κ°’μ„ κ³„μ† μ½μ–΄ λ³€ν™”λ¥Ό μ•μ•„λ‚΄λ” λ°©μ‹μ΄λ‹¤.  
λ‘ λ²μ§Έ λ°©λ²•μΌλ΅λ” μΈν„°λ½νΈ λ°©μ‹μ΄ μλ‹¤. μΈν„°λ½νΈλ” MCU μμ²΄κ°€ ν•λ“μ›¨μ–΄μ μΌλ΅ κ·Έ λ³€ν™”λ¥Ό μ²΄ν¬ν•μ—¬ λ³€ν™” μ‹μ—λ§ μΌμ •ν• λ™μ‘μ„ ν•λ” λ°©μ‹μ΄λ‹¤.

<br/>

## Q3. ν΄λ§ λ°©μ‹μ— λΉ„ν•΄ μΈν„°λ½νΈ λ°©μ‹μ΄ κ°–λ” μ¥μ μ„ λ§μ”€ν•΄ μ£Όμ„Έμ”.
μΈν„°λ½νΈ λ°©μ‹μΌλ΅ μ…λ ¥μ„ λ°›μ„ κ²½μ°, ν΄λ§ λ°©μ‹μ— λΉ„ν•΄ μ‹ μ†ν•κ² λ€μ‘ν• μ μμΌλ©° μ»¨νΈλ΅¤λ¬λ” μ£ΌκΈ°μ μΌλ΅ ν•€μ κ°’μ„ μ½μ§€ μ•μ•„λ„ λκΈ° λ•λ¬Έμ— μ›λ μΌμ— μ§‘μ¤‘ν•  μ μλ‹¤.

<br/>
<br/>

# π—‚ μ°Έκ³ 
- [[OSκΈ°μ΄] μΈν„°λ½νΈ μ λ€λ΅ μ΄ν•΄ν•κΈ° (velog.io)](https://velog.io/@adam2/%EC%9D%B8%ED%84%B0%EB%9F%BD%ED%8A%B8)
- [[OS] Interrupt μΈν„°λ½νΈλ€? :: DOHAN's iOS (tistory.com)](https://doh-an.tistory.com/31)
- [[μ»΄ν“¨ν„°κµ¬μ΅°] μΈν„°λ½νΈ(Interrupt)λ€? (tistory.com)](https://whatisthenext.tistory.com/147)
- [μΈν„°λ½νΈ μΆ…λ¥μ™€ μ²λ¦¬κ³Όμ •κ³Ό μ°μ„ μμ„. μΈν„°λ½νΈ(Inerrupts) | by μμ—°μ΄ | Medium](https://medium.com/@lazypanda43/%EC%9D%B8%ED%84%B0%EB%9F%BD%ED%8A%B8-%EC%A2%85%EB%A5%98%EC%99%80-%EC%B2%98%EB%A6%AC%EA%B3%BC%EC%A0%95%EA%B3%BC-%EC%9A%B0%EC%84%A0%EC%88%9C%EC%9C%84-c95c26909472)
- [μ΄μμ²΄μ  Β· μΈν„°λ½νΈ, νΈλ© β€” PROJECT REBAS](https://rebas.kr/862)
- [3. μΈν„°λ½νΈ (Interrupt) :: JustZino (tistory.com)](https://justzino.tistory.com/4)
- [μΈν„°λ½νΈ(interrupt), μμ™Έ(exception), νΈλ©(trap)μ λΉ„κµ - Easy is Perfect (melonicedlatte.com)](https://melonicedlatte.com/computerarchitecture/2019/02/12/213856.html)
- [μΈν„°λ½νΈ(Interrupt)μ κ°λ…κ³Ό μΆ…λ¥ (tistory.com)](https://raisonde.tistory.com/entry/%EC%9D%B8%ED%84%B0%EB%9F%BD%ED%8A%B8Interrupt%EC%9D%98-%EA%B0%9C%EB%85%90%EA%B3%BC-%EC%A2%85%EB%A5%98)
- [μΈν„°λ½νΈ(Interrupt)μ μΆ…λ¥μ™€ μ²λ¦¬κ³Όμ • (tistory.com)](https://oizys.tistory.com/4)
- [[λ©΄μ ‘ μμƒ μ§λ¬Έ] μ΄μμ²΄μ (3/3) - λ¬΄μ„±μ΄μ κ³µλ¶€ λΈ”λ΅κ·Έ (ddb8036631.github.io)](https://ddb8036631.github.io/question/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C-3/)
- [μΈν„°λ½νΈ (tistory.com)](https://gona.tistory.com/36)
